---
title: vitepress-1
date: 2022-11-15 11:22:19
tags:
categories: SSG(Static Site Generation)
---

# vitepressç³»åˆ—æ–‡ç« -1: ä½¿ç”¨vitepressæ­å»ºæ–‡æ¡£å‹ç½‘ç«™

## vitepressæ˜¯ä»€ä¹ˆ

{% blockquote %}
VitePress
Vite & Vue Powered Static Site Generator
{% endblockquote %}

- åŸºäºVue3å’ŒViteçš„é™æ€ç«™ç‚¹ç”Ÿæˆå™¨
- ä¸VuePress(Vue2+webpack)åŠŸèƒ½ç±»ä¼¼
- å¯ä»¥é€šè¿‡ç¼–å†™Markdownæ–‡æ¡£æ¥ç”Ÿæˆç½‘ç«™ï¼Œä¸”å…è®¸Markdownä¸­æ··åˆä½¿ç”¨vueç»„ä»¶
- å®˜ç½‘é“¾æ¥: https://vitepress.vuejs.org/ 
- Github: https://github.com/vuejs/vitepress

## ä¸ºä»€ä¹ˆé€‰æ‹©vitepress

- Vueå®˜æ–¹æ¨è
- ä½¿ç”¨viteæ„å»ºï¼Œé€Ÿåº¦å¿«ã€çƒ­æ›´è¡Œå¿«
- å¯ä»¥åŒæ—¶å­¦ä¹ Vue3ã€Vite
- æ¯”nuxtjsè¦è½»é‡ï¼Œé…ç½®ç®€å•ï¼Œå…¥é—¨å®¹æ˜“

## vitepressé€‚ç”¨åœºæ™¯

- æ–‡æ¡£åº“
- ä¸ªäººåšå®¢

## å¦‚ä½•ä½¿ç”¨vitepress

### æ–°å»ºé¡¹ç›®

```
mkdir vitepress-starter && cd vitepress-starter
yarn init    // æˆ–è€… npm init
yarn add --dev vitepress vue@3 typescript // npm install --save-dev vitepress vue typescript
mkdir docs && echo '# Hello VitePress' > docs/index.md
```

### è¿è¡Œç¯å¢ƒé…ç½®
1. package.json

```
{
  ...
  "scripts": {
    "docs:dev": "vitepress dev docs",
    "docs:build": "vitepress build docs",
    "docs:serve": "vitepress serve docs"
  },
  ...
}
```

### è¿è¡Œ

1. å¼€å‘æ¨¡å¼(åŸºäºesbuildæ„å»º)

```
yarn docs:dev  // æˆ– npm run docs:dev
```
2. ç”Ÿäº§æ¨¡å¼

```
// æ„å»ºç”Ÿäº§åŒ…(åŸºäºrollupæ„å»º)
yarn docs:build  // æˆ– npm run docs:build

// èµ·ä¸ªæœ¬åœ°æœåŠ¡è¿è¡Œçœ‹æ•ˆæœ
yarn docs:serve  // æˆ– npm run docs:serve
```

### è¿›é˜¶åŠŸèƒ½é…ç½®
1. .vitepress/config.mts

æŸ¥çœ‹å…¨éƒ¨å¯é…ç½®å†…å®¹ï¼Œå¯é€šè¿‡TypeScriptçš„ç±»å‹å£°æ˜UserConfigè¿›è¡ŒæŸ¥é˜…, ä»¥ä¸‹æ˜¯ç¤ºä¾‹

```
import type { UserConfig, HeadConfig } from "vitepress";

// åœ¨htmlæ–‡æ¡£å¢åŠ ä¸€äº›é€šç”¨çš„è„šæœ¬scriptã€æ ·å¼cssã€metaç­‰
const head: HeadConfig[] = [
  [
    "script",
    {},
    `;(() => {
       console.log('script');
     })()`,
  ],
];

// é¡¶éƒ¨å¯¼èˆªé…ç½®
const nav = [
    { text: "åŸºç¡€ç»„ä»¶", link: "/component/" },
    { text: "é«˜çº§ç»„ä»¶", link: "/business/"},
    { text: "å¯è§†åŒ–ç»„ä»¶", link: "/visualization/" },
];

// ä¾§è¾¹å¯¼èˆªé…ç½®

const sidebar = {
  '/component/': [
    {
        text: 'å¼€å§‹',
        collapsible: true,
        items: [
            {text:'å¦‚ä½•ä½¿ç”¨', link: '/component/'},
        ]
    },
    {
      text:'é€šç”¨',
      collapsible: true,
      items: [
          {text:'Button æŒ‰é’®', link:'/component/button'},
      ],
  },
  ],
  '/business/': [
    {
        text: 'ä»‹ç»',
        collapsible: true,
        items: [
            {text:'å¦‚ä½•ä½¿ç”¨',link: '/business/'},
        ]
    },
  ],
  '/visualization/': [
    {
        text: 'ä»‹ç»',
        collapsible: true,
        items: [
            {text:'å¦‚ä½•ä½¿ç”¨',link: '/visualization/'},
        ]
    },
  ]
}


const config: UserConfig = {
  title: "æ–‡æ¡£åº“",
  description: "æ­¤å¤„æ˜¯æè¿°",
  lang: 'zh-CN',
  lastUpdated: true,
  ignoreDeadLinks: true,
  base: "",
  head,
  themeConfig: {
    nav,
    sidebar,
    smoothScroll: true,
  },
};

export default config;
```

2. ä¸»é¢˜é…ç½®

```
// .vitepress/theme/index.ts

import DefaultTheme from 'vitepress/theme'
import './style.css' // æ­¤å¤„æ˜¯ä¸»é¢˜çš„å…¨å±€æ ·å¼ï¼Œå¯è¦†ç›–åŸä¸»é¢˜çš„è®¾ç½®
import type { Theme } from 'vitepress'

const define = <T>(value: T): T => value
export default define<Theme>({
  ...DefaultTheme, // æ­¤å¤„é‡‡ç”¨äº†é»˜è®¤ä¸»é¢˜ï¼Œå¯ä»¥æ›¿æ¢ä¸ºè‡ªå®šä¹‰çš„ä¸»é¢˜
  NotFound: DefaultTheme.NotFound,
  enhanceApp: ({ app, router, siteData }) => {
    app.use('xxx'); // ä¸€äº›ç»„ä»¶æˆ–åº“ï¼Œæ¥å¢åŠ åŠŸèƒ½
    console.log(router);
    console.log(siteData)
  },
})

```

3. é¦–é¡µè‡ªå®šä¹‰ [index.md]

å¸ƒå±€é€‰æ‹©homeï¼ŒåŒ…å« hero å’Œ features ä¸¤éƒ¨åˆ†

```
---
layout: home

hero:
  name: VitePress
  text: Vite & Vue powered static site generator.
  tagline: Lorem ipsum...
  image:
    src: /logo.png
    alt: VitePress
  actions:
    - theme: brand
      text: Get Started
      link: /component/index
    - theme: alt
      text: View on GitHub
      link: https://github.com/vuejs/vitepress
    - theme: alt
      text: æµ‹è¯•æŒ‰é’®
      link: /business/index

features:
  - icon: âš¡ï¸
    title: Vite, The DX that can't be beat
    details: Lorem ipsum...
  - icon: ğŸ––
    title: Power of Vue meets Markdown
    details: Lorem ipsum...
  - icon: ğŸ› ï¸
    title: Simple and minimal, always
    details: Lorem ipsum...
---

```

### è¿è¡Œæ•ˆæœ
- é¦–é¡µæ•ˆæœ
![é¦–é¡µ](https://s1.ax1x.com/2022/11/17/ze2B59.png "é¦–é¡µ")

- å…¶ä¸­çš„ä¸€ä¸ªæ–‡æ¡£é¡µ
![Buttoné¡µ](https://s1.ax1x.com/2022/11/16/zZT0Tf.png "Buttoné¡µ")

## æ€»ç»“

- æ•´ä½“æ¥è¯´å¼€å‘ä½“éªŒå¾ˆå¿«ï¼Œé…ç½®ä¹Ÿç®€å•
- ä¸‹ä¸€ç¯‡æ–‡ç« é¢„å‘Šï¼švitepressç³»åˆ—æ–‡ç« -2: å¦‚ä½•å¼€å‘å¹¶åº”ç”¨è‡ªå®šä¹‰çš„vitepressä¸»é¢˜